<?xml version="1.0" encoding="UTF-8" ?>
<proxy>
  <logger>
      <severity>TRACE</severity>
      <severity_console>DEBUG</severity_console>
      <log_name>Log_%Y%m%d_%H%M%S_rpc.log</log_name>
      <sinks>
        <sink>
            <channel>0</channel>
            <type>CONSOLE_SINK</type>
            <severity>INFO</severity>
        </sink>
        <sink>
            <channel>0</channel>
            <type>FILE_SINK</type>
            <template>%Y%m%d_%H%M%S.log</template>
            <severity>DEBUG</severity>
            <prefix>Monitor</prefix>
            <suffix></suffix>
        </sink>
        <sink>
            <channel>1</channel>
            <type>FILE_SINK</type>
            <template>%Y%m%d_%H%M%S.log</template>
            <severity>DEBUG</severity>
            <prefix>SP01</prefix>
            <suffix>filtered</suffix>
        </sink>
        <sink>
            <channel>2</channel>
            <type>FILE_SINK</type>
            <template>%Y%m%d_%H%M%S.log</template>
            <severity>DEBUG</severity>
            <prefix>SP01</prefix>
            <suffix>original</suffix>
        </sink>
        <sink>
            <channel>3</channel>
            <type>FILE_SINK</type>
            <open_by_demand>true</open_by_demand>
            <template>%Y%m%d_%H%M%S.log</template>
            <severity>DEBUG</severity>
            <prefix>Test</prefix>
            <suffix></suffix>
          </sink>
        <sink>
            <channel>4</channel>
            <type>FILE_SINK</type>
            <template>%Y%m%d_%H%M%S.log</template>
            <severity>DEBUG</severity>
            <prefix>SP02</prefix>
            <suffix>filtered</suffix>
        </sink>
        <sink>
            <channel>5</channel>
            <type>FILE_SINK</type>
            <template>%Y%m%d_%H%M%S.log</template>
            <severity>DEBUG</severity>
            <prefix>SP02</prefix>
            <suffix>original</suffix>
        </sink>
      </sinks>
    <client>
      <host>localhost</host>
      <port>2100</port>
      <retry>5</retry>
      <max_message_size>2048</max_message_size>
      <module_tag_size>4</module_tag_size>
      <severity>DEBUG</severity>
    </client>
  </logger>
  <actors>
    <actor>
      <!-- id - unique string for actors -->
      <id>TELNET-2002</id>
      <!-- name - predeclares value in actor.h -->
      <name>TCP_SERVER</name>
      <port>2002</port>
      <input_buffer_size>4096</input_buffer_size>
      <protocol>TELNET</protocol>
    </actor>
    <actor>
      <id>UART0</id>
      <name>UART_CLIENT</name>
      <port>3</port>
      <port_name>
        <windows>COM</windows>
        <!-- for linux can be a several names - /dev/tty, /dev/ttyS, etc - for detail see docs by you linux system -->
        <!-- by default is /dev/tty -->
        <linux>/dev/ttyS</linux>
      </port_name>
      <input_buffer_size>1024</input_buffer_size>
      <protocol>STREAM</protocol>
      <option>
        <!-- baud_rate - 921600, 460800, 230400, 115200, 57600, 38400, 19200, 14400, 9600, 7200, 4800, 2400, 1800, 1200, 600, 300 -->
        <!-- by default is 115200 -->
        <baud_rate>115200</baud_rate>
        <!-- flow_control - NONE, HARD, SOFT -->
        <!-- SOFT is XON/XOFF -->
        <!-- by default is NONE -->
        <flow_control>NONE</flow_control>
        <!-- parity - NONE, ODD, EVEN -->
        <!-- by default is NONE -->
        <parity>NONE</parity>
        <!-- parity - 1, 1.5, 2 -->
        <!-- by default is 1 -->
        <stop_bits>1</stop_bits>
        <!-- character_size - 7, 8 -->
        <!-- by default is 8 -->
        <character_size>8</character_size>
      </option>
    </actor>
    <actor>
        <id>UART0-LOGGER-ADAPTOR</id>
        <name>LOGGER_ADAPTOR</name>
        <protocol>STREAM</protocol>
        <severity>INFO</severity>
        <!-- tag defines name of data source (module name in logs) -->
        <tag>SP01</tag>
        <sinks>
            <sink>
                <id>1</id>
                <filters>
                    <filter>
                        <name>REGEX_ERASE</name>
                        <expression>(\x1B\[([0-9]+;)*[0-9]*[m|h|l]{1})</expression>
                    </filter>
                </filters>
            </sink>
            <sink>
                <id>2</id>
            </sink>
            <sink>
                <id>3</id>
                <filters>
                    <filter>
                        <name>REGEX_ERASE</name>
                        <expression>(\x1B\[([0-9]+;)*[0-9]*[m|h|l]{1})</expression>
                    </filter>
                </filters>
            </sink>
        </sinks>
    </actor>

    <actor>
        <id>TELNET-2005</id>
        <!-- name - predeclares value in actor.h -->
        <name>TCP_SERVER</name>
        <port>2005</port>
        <input_buffer_size>4096</input_buffer_size>
        <protocol>TELNET</protocol>
    </actor>
    <actor>
      <id>UART1</id>
      <name>UART_CLIENT</name>
      <port>5</port>
      <port_name>
        <windows>COM</windows>
        <linux>/dev/ttyS</linux>
      </port_name>
      <input_buffer_size>1024</input_buffer_size>
      <protocol>STREAM</protocol>
      <option>
        <baud_rate>115200</baud_rate>
        <flow_control>NONE</flow_control>
        <parity>NONE</parity>
        <stop_bits>1</stop_bits>
        <character_size>8</character_size>
      </option>
    </actor>
    <actor>
        <id>UART1-LOGGER-ADAPTOR</id>
        <name>LOGGER_ADAPTOR</name>
        <protocol>STREAM</protocol>
        <severity>INFO</severity>
        <!-- tag defines name of data source (module name in logs) -->
        <tag>SP02</tag>
        <sinks>
            <sink>
                <id>4</id>
                <filters>
                    <filter>
                        <name>REGEX_ERASE</name>
                        <expression>(\x1B\[([0-9]+;)*[0-9]*[m|h|l]{1})</expression>
                    </filter>
                </filters>
            </sink>
            <sink>
                <id>5</id>
            </sink>
            <sink>
                <id>3</id>
                <filters>
                    <filter>
                        <name>REGEX_ERASE</name>
                        <expression>(\x1B\[([0-9]+;)*[0-9]*[m|h|l]{1})</expression>
                    </filter>
                </filters>
            </sink>
        </sinks>
    </actor>

    <actor>
      <id>CMD-CONSOLE</id>
      <name>CONSOLE_SERVER</name>
      <protocol>TELNET</protocol>
      <timer-delay>100</timer-delay>
    </actor>
    <actor>
      <id>CMD-MANAGER</id>
      <name>MANAGER_ADAPTOR</name>
    </actor>

    <actor>
        <id>OSCARLOG</id>
        <name>TCP_SERVER</name>
        <port>2100</port>
        <input_buffer_size>6</input_buffer_size>
        <protocol>OSCAR</protocol>
    </actor>
    <actor>
        <id>OSCAR-LOG-ADAPTER</id>
        <name>LOGGER_ADAPTOR</name>
        <protocol>OSCAR</protocol>
        <sinks>
            <sink>
                <id>3</id>
            </sink>
        </sinks>
    </actor>
    <actor>
        <id>TELNET-2006</id>
        <!-- name - predeclares value in actor.h -->
        <name>TCP_SERVER</name>
        <port>2006</port>
        <input_buffer_size>4096</input_buffer_size>
        <protocol>TELNET</protocol>
    </actor>
    <actor>
        <id>TELNET-2007</id>
        <!-- name - predeclares value in actor.h -->
        <name>TCP_SERVER</name>
        <port>2007</port>
        <input_buffer_size>4096</input_buffer_size>
        <protocol>TELNET</protocol>
    </actor>
  </actors>
  <channels>
    <channel>
      <!-- id - unique number for channel -->
      <id>TCP-TO-UART0</id>
      <!-- source - should be defined in actors section -->
      <source>TELNET-2002</source>
      <!-- desination - should be defined in actors section -->
      <destination>UART0</destination>
    </channel>
    <channel>
      <id>UART0-TO-TCP</id>
      <source>UART0</source>
      <destination>TELNET-2002</destination>
    </channel>
    <channel>
        <id>UART0-TO-LOG</id>
        <source>UART0</source>
        <destination>UART0-LOGGER-ADAPTOR</destination>
    </channel>
    <channel>
        <!-- id - unique string for channel -->
        <id>TCP-TO-UART1</id>
        <!-- source - should be defined in actors section -->
        <source>TELNET-2005</source>
        <!-- desination - should be defined in actors section -->
        <destination>UART1</destination>
    </channel>
    <channel>
        <id>UART1-TO-TCP</id>
        <source>UART1</source>
        <destination>TELNET-2005</destination>
    </channel>
    <channel>
      <id>UART1-TO-LOG</id>
      <source>UART1</source>
      <destination>UART1-LOGGER-ADAPTOR</destination>
    </channel>
    <channel>
      <id>CMD-CONSOLE-TO-MANAGER</id>
      <source>CMD-CONSOLE</source>
      <destination>CMD-MANAGER</destination>
    </channel>
    <channel>
      <id>MANAGER-TO-CMD-CONSOLE</id>
      <source>CMD-MANAGER</source>
      <destination>CMD-CONSOLE</destination>
    </channel>
    <channel>
        <id>OSCAR-TO-LOG</id>
        <source>OSCARLOG</source>
        <destination>OSCAR-LOG-ADAPTER</destination>
    </channel>
  </channels>
    <UNUSED-NOW-BUT-CAM-BE-TURNED-ON>
        <actors>
            <actor>
                <id>ETFLOG</id>
                <name>TCP_SERVER</name>
                <port>2003</port>
                <input_buffer_size>12</input_buffer_size>
                <protocol>ETFLOG</protocol>
            </actor>
            <actor>
                <id>ETF-LOGGER-ADAPTOR</id>
                <name>LOGGER_ADAPTOR</name>
                <protocol>ETFLOG</protocol>
                <sinks>
                    <sink>
                        <id>3</id>
                    </sink>
                </sinks>
            </actor>
            <actor>
                <id>OSCARLOG</id>
                <name>TCP_SERVER</name>
                <port>2100</port>
                <input_buffer_size>6</input_buffer_size>
                <protocol>OSCAR</protocol>
            </actor>
            <actor>
                <id>OSCAR-LOG-ADAPTER</id>
                <name>LOGGER_ADAPTOR</name>
                <protocol>OSCAR</protocol>
                <sinks>
                    <sink>
                        <id>3</id>
                    </sink>
                </sinks>
            </actor>
        </actors>
        <channels>
            <channel>
                <id>OSCAR-TO-LOG</id>
                <source>OSCARLOG</source>
                <destination>OSCAR-LOG-ADAPTER</destination>
            </channel>
            <channel>
                <id>ETF-TO-LOG</id>
                <source>ETFLOG</source>
                <destination>ETF-LOGGER-ADAPTOR</destination>
            </channel>
        </channels>
	</UNUSED-NOW-BUT-CAM-BE-TURNED-ON>
</proxy>
